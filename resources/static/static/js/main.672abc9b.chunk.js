(this.webpackJsonprtsp2flvweb=this.webpackJsonprtsp2flvweb||[]).push([[0],{165:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),c=t.n(o),i=t(49),l=t(13),d=t(203),s=t(167),j=t(217),b=t(221),h=t(220),m=t(216),u=t(218),p=t(237),x=t(219),O=t(110),g=t.n(O),f=t(109),v=t.n(f),w=t(215),k=t(74),C=t.n(k),y=t(209),S=t(239),I=t(207),N=t(208),T=t(37),B=t(210),P=t(48),R=t.n(P),E=t(205),M=t(44),D=t.n(M);let Y;Y=window.location.origin;var V={serverURL:Y},A=t(32),H=t.n(A);H.a.defaults.withCredentials=!1,H.a.defaults.timeout=1e4,H.a.interceptors.request.use((e=>{let a=window.localStorage.getItem("token");return e.headers.token=a,e}),(e=>(console.error(e),Promise.reject(e)))),H.a.interceptors.response.use((function(e){return e.data&&e.data.errcode&&401===parseInt(e.data.errcode)&&(window.location.hash="#/login"),e}),(function(e){return H.a.isCancel()||(e.response?(console.log(401===e.response.status),401===e.response.status?window.localStorage.getItem("token")&&window.localStorage.getItem("tokenExpired")&&"false"!==window.localStorage.getItem("tokenExpired")||(window.localStorage.setItem("tokenExpired","true"),window.location.hash="#/login"):500===e.response.status&&alert("server exception !")):e&&"error: timeout"===String(e).toLowerCase().substring(0,14)?alert("server timeout !"):alert("server error !")),Promise.reject(e)}));let F=V.serverURL;const L=(e,a)=>H.a.post(`${F}${e}`,a).then((e=>e.data)),W=(e,a)=>H.a.get(`${F}${e}`,{params:a}).then((e=>e.data));var z=`${V.serverURL}`,$=e=>L("/system/login",e),U=e=>W("/camera/list",e),q=e=>W("/camera/detail",e),J=e=>L("/camera/edit",e),_=e=>L(`/camera/delete/${e.id}`,e),K=e=>L("/camera/enabled",e),G=e=>L("/camera/savevideochange",e),Q=e=>L("/camera/livechange",e),X=e=>L("/camera/playauthcodereset",e),Z=e=>W("/camerashare/list",e),ee=e=>L("/camerashare/edit",e),ae=e=>L(`/camerashare/delete/${e.id}`,e),te=e=>L("/camerashare/enabled",e),ne=t(2);const re=Object(d.a)((e=>({appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}))),oe=r.a.forwardRef((function(e,a){return Object(ne.jsx)(E.a,{direction:"up",ref:a,...e})}));function ce(e){const a=re(),[t,o]=r.a.useState(!1),[c,i]=r.a.useState(!0),[l,d]=r.a.useState(e.playParam||{playMethod:"",cameraCode:"",authCode:""});var s=null,j=0;Object(n.useImperativeHandle)(e.onRef,(()=>({handleClickOpen:b})));const b=()=>{o(!0)},h=()=>{o(!1)},m=e=>{var a={type:"flv"};let t=z+"/live/"+l.playMethod+"/"+l.cameraCode+"/"+l.authCode+".flv";a.url=t,a.hasAudio=c,a.isLive=!0,console.log("MediaDataSource",a),u(a)},u=e=>{var a=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof s&&null!=s&&(s.pause(),s.unload(),s.detachMediaElement(),s.destroy(),s=null),(s=D.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).on(D.a.Events.ERROR,((e,a,t)=>{console.log("errorType:",e),console.log("errorDetail:",a),console.log("errorInfo:",t),s&&(s.pause(),s.unload(),s.detachMediaElement(),s.destroy(),s=null,window.setTimeout(m,500))})),s.on(D.a.Events.STATISTICS_INFO,(function(e){0!=j?j!=e.decodedFrames?j=e.decodedFrames:(console.log("decodedFrames:",e.decodedFrames),j=0,s&&(s.pause(),s.unload(),s.detachMediaElement(),s.destroy(),s=null,window.setTimeout(m,500))):j=e.decodedFrames})),s.attachMediaElement(a),s.load(),s.play()};return Object(ne.jsx)("div",{children:Object(ne.jsxs)(S.a,{fullScreen:!0,open:t,onClose:h,TransitionComponent:oe,children:[Object(ne.jsx)(I.a,{className:a.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:m,children:"play"}),Object(ne.jsxs)(T.a,{variant:"h6",className:a.title,children:["hasAudio",Object(ne.jsx)(B.a,{checked:c,id:"Audio",color:"primary",name:"hasAudio",onChange:e=>{i(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]}),Object(ne.jsx)(y.a,{autoFocus:!0,color:"inherit",onClick:h,children:Object(ne.jsx)(R.a,{})})]})}),Object(ne.jsx)("div",{className:a.videoContainer,children:Object(ne.jsx)("div",{children:Object(ne.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}var ie=t(236),le=t(234),de=t(211);const se=Object(d.a)((e=>({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}))),je=r.a.forwardRef((function(e,a){return Object(ne.jsx)(E.a,{direction:"up",ref:a,...e})}));function be(e){const a=se(),[t,o]=r.a.useState(!1),[c,i]=r.a.useState(1===e.row.enabled),[l,d]=r.a.useState(1===e.row.saveVideo),[s,j]=r.a.useState(1===e.row.live),[b,h]=r.a.useState({id:e.row.id,code:e.row.code,rtmpAuthCode:e.row.rtmpAuthCode,playAuthCode:e.row.playAuthCode,onlineStatus:e.row.onlineStatus,enabled:e.row.enabled,saveVideo:e.row.saveVideo,live:e.row.live}),[m,u]=r.a.useState(!1),[p,x]=r.a.useState("");Object(n.useImperativeHandle)(e.onRef,(()=>({handleClickOpen:O})));const O=()=>{o(!0)},g=()=>{o(!1)},f=a=>{J(b).then((a=>{if(1===a.code)return o(!1),void(e.callBack&&e.callBack());x(a.msg),u(!0),window.setTimeout((function(){u(!1)}),5e3)}))},v=e=>{b[e.target.id]=e.target.value},w=e=>{console.log(e.target.checked),b[e.target.id]=e.target.checked?1:0,"enabled"===e.target.id&&i(e.target.checked),"saveVideo"===e.target.id&&d(e.target.checked),"live"===e.target.id&&j(e.target.checked)};return Object(ne.jsx)("div",{children:Object(ne.jsxs)(S.a,{fullScreen:!0,open:t,onClose:g,TransitionComponent:je,children:[Object(ne.jsx)(I.a,{className:a.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:f,children:"\u4fdd\u5b58"}),Object(ne.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(ne.jsx)(y.a,{variant:"contained",onClick:a=>{_(b).then((a=>{if(1===a.code)return o(!1),void(e.callBack&&e.callBack());x(a.msg),u(!0),window.setTimeout((function(){u(!1)}),5e3)}))},children:"\u5220\u9664"}):"",Object(ne.jsx)(T.a,{variant:"h6",className:a.title}),Object(ne.jsx)(y.a,{autoFocus:!0,color:"inherit",onClick:g,children:Object(ne.jsx)(R.a,{})})]})}),m?Object(ne.jsxs)(le.a,{severity:"error",children:[Object(ne.jsx)(de.a,{children:"Error"}),p," ",Object(ne.jsx)("strong",{children:"check it out!"})]}):"",Object(ne.jsx)("div",{className:a.formDiv,children:Object(ne.jsxs)("form",{className:a.formClass,noValidate:!0,autoComplete:"off",onSubmit:f,children:["edit"===e.type?Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:b.id})}):"",Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"code",label:"\u6444\u50cf\u5934\u7f16\u53f7",defaultValue:b.code,onChange:v})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"rtmpAuthCode",label:"\u6444\u50cf\u5934rtmp\u6743\u9650\u7801",defaultValue:b.rtmpAuthCode,onChange:v})}),"edit"===e.type?"":Object(ne.jsxs)("div",{children:["\u542f\u7528\u72b6\u6001\uff1a",Object(ne.jsx)(B.a,{checked:c,id:"enabled",onChange:w,color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})]}),Object(ne.jsxs)("div",{children:["\u5f55\u50cf\u72b6\u6001\uff1a",Object(ne.jsx)(B.a,{checked:l,id:"saveVideo",onChange:w,color:"primary",name:"saveVideo",inputProps:{"aria-label":"primary checkbox"}})]}),Object(ne.jsxs)("div",{children:["\u76f4\u64ad\u72b6\u6001\uff1a",Object(ne.jsx)(B.a,{checked:s,id:"live",onChange:w,color:"primary",name:"live",inputProps:{"aria-label":"primary checkbox"}})]})]})})]})})}const he=Object(d.a)((()=>({root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}})));function me(e){const a=he(),[t,n]=r.a.useState(!1),[o,c]=r.a.useState(e.row),l=()=>{o.enabled=1===o.enabled?0:1,K(o).then((a=>{if(1===a.code)return n(!1),void(e.callBack&&e.callBack())}))},d=()=>{o.saveVideo=1===o.saveVideo?0:1,G(o).then((a=>{if(1===a.code)return n(!1),void(e.callBack&&e.callBack())}))},s=()=>{o.live=1===o.live?0:1,Q(o).then((a=>{if(1===a.code)return n(!1),void(e.callBack&&e.callBack())}))};let j=r.a.createRef();let b=r.a.createRef();return Object(ne.jsx)(w.a,{onClickAway:()=>{n(!1)},children:Object(ne.jsxs)("div",{className:a.root,children:[Object(ne.jsx)("button",{type:"button",onClick:()=>{n((e=>!e))},children:Object(ne.jsx)(C.a,{})}),t?Object(ne.jsx)("div",{className:a.dropdown,children:Object(ne.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px"},children:[Object(ne.jsx)("button",{onClick:function(){n(!1),b.current.handleClickOpen()},children:"\u7f16\u8f91"}),1===e.row.enabled?Object(ne.jsx)("button",{onClick:l,children:"\u7981\u7528"}):Object(ne.jsx)("button",{onClick:l,children:"\u542f\u7528"}),Object(ne.jsx)("button",{onClick:function(){n(!1),j.current.handleClickOpen()},children:"\u64ad\u653e"}),Object(ne.jsx)("button",{children:Object(ne.jsx)(i.b,{exact:!0,to:{pathname:"/camerashare",search:"?cameraId="+e.row.id,state:{row:e.row}},children:"\u5206\u4eab"})}),Object(ne.jsx)("button",{onClick:()=>{X(o).then((a=>{if(1===a.code)return n(!1),void(e.callBack&&e.callBack())}))},children:"\u91cd\u7f6e\u64ad\u653e\u6743\u9650\u7801"}),1===e.row.saveVideo?Object(ne.jsx)("button",{onClick:d,children:"\u505c\u6b62\u5f55\u50cf"}):Object(ne.jsx)("button",{onClick:d,children:"\u5f00\u542f\u5f55\u50cf"}),1===e.row.live?Object(ne.jsx)("button",{onClick:s,children:"\u505c\u6b62\u76f4\u64ad"}):Object(ne.jsx)("button",{onClick:s,children:"\u5f00\u542f\u76f4\u64ad"})]})}):null,Object(ne.jsx)(ce,{playParam:{playMethod:"permanent",cameraCode:e.row.code,authCode:e.row.playAuthCode},onRef:j}),Object(ne.jsx)(be,{row:e.row,type:"edit",callBack:e.callBack,onRef:b})]})})}const ue=[{id:"id",label:"id",minWidth:170},{id:"code",label:"\u6444\u50cf\u5934\u7f16\u53f7",minWidth:100},{id:"rtmpAuthCode",label:"\u6444\u50cf\u5934rtmp\u6743\u9650\u7801"},{id:"playAuthCode",label:"\u64ad\u653e\u6743\u9650\u7801"},{id:"onlineStatus",label:"\u5728\u7ebf\u72b6\u6001",format:e=>e&&1===e?Object(ne.jsx)(v.a,{}):Object(ne.jsx)(g.a,{})},{id:"enabled",label:"\u542f\u7528\u72b6\u6001",format:e=>Object(ne.jsx)(B.a,{checked:1===e,id:"enabled",color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})},{id:"live",label:"\u76f4\u64ad\u72b6\u6001",format:e=>Object(ne.jsx)(B.a,{checked:1===e,id:"live",color:"primary",name:"live",inputProps:{"aria-label":"primary checkbox"}})},{id:"saveVideo",label:"\u5f55\u50cf\u72b6\u6001",format:e=>Object(ne.jsx)(B.a,{checked:1===e,id:"saveVideo",color:"primary",name:"saveVideo",inputProps:{"aria-label":"primary checkbox"}})},{id:"action",label:"\u64cd\u4f5c",minWidth:100,format:(e,a,t)=>Object(ne.jsx)(me,{row:a,callBack:t})}],pe=Object(d.a)((e=>({root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})));function xe(){const e=pe(),[a,t]=r.a.useState(0),[n,o]=r.a.useState(10);var c,i;[c,i]=r.a.useState([]);const l=()=>{U().then((e=>{1===e.code&&(c.splice(0),c.push(...e.data.page),i([]),i(c))}))};let d=r.a.createRef();return r.a.useEffect(l,[]),Object(ne.jsxs)(s.a,{className:e.root,children:[Object(ne.jsx)(I.a,{className:e.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:function(){d.current.handleClickOpen()},children:"\u521b\u5efa"}),Object(ne.jsx)(T.a,{variant:"h6",className:e.title,children:"\u6444\u50cf\u5934\u5217\u8868"})]})}),Object(ne.jsx)(be,{row:{id:"",code:"",rtmpAuthCode:"",playAuthCode:"",onlineStatus:0,enabled:1,saveVideo:0,live:1},type:"add",callBack:l,onRef:d}),Object(ne.jsx)(m.a,{className:e.container,children:Object(ne.jsxs)(j.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(ne.jsx)(u.a,{children:Object(ne.jsx)(x.a,{children:ue.map((e=>Object(ne.jsx)(h.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)))})}),Object(ne.jsx)(b.a,{children:c.slice(a*n,a*n+n).map((e=>Object(ne.jsx)(x.a,{hover:!0,role:"checkbox",tabIndex:-1,children:ue.map((a=>{const t=e[a.id];return Object(ne.jsx)(h.a,{align:a.align,children:a.format?a.format(t,e,l):t},a.id)}))},e.code)))})]})}),Object(ne.jsx)(p.a,{rowsPerPageOptions:[10,25,100],component:"div",count:c.length,rowsPerPage:n,page:a,onChangePage:(e,a)=>{t(a)},onChangeRowsPerPage:e=>{o(+e.target.value),t(0)}})]})}var Oe=t(23),ge=t.n(Oe),fe=t(214),ve=t(222),we=t(227),ke=t(111),Ce=t.n(ke),ye=t(226),Se=t(224),Ie=t(223),Ne=t(225);const Te=Object(d.a)((e=>({root:{width:"100%"}})));function Be(e){const a=Te(),[t,o]=r.a.useState(!1),[c,i]=r.a.useState(e.dialog.title),[l,d]=r.a.useState(e.dialog.content);Object(n.useImperativeHandle)(e.onRef,(()=>({handleClickOpen:s})));const s=()=>{o(!0)},j=()=>{o(!1)};return Object(ne.jsx)("div",{className:a.root,children:Object(ne.jsxs)(S.a,{open:t,onClose:j,"aria-labelledby":"form-dialog-title",children:[Object(ne.jsx)(Ie.a,{id:"form-dialog-title",children:c}),Object(ne.jsx)(Se.a,{children:Object(ne.jsx)(Ne.a,{children:l})}),Object(ne.jsx)(ye.a,{children:Object(ne.jsx)(y.a,{onClick:j,color:"primary",children:"OK"})})]})})}const Pe=Object(d.a)((e=>({appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}))),Re=r.a.forwardRef((function(e,a){return Object(ne.jsx)(E.a,{direction:"up",ref:a,...e})}));function Ee(e){const a=Pe(),[t,o]=r.a.useState(!1),[c,i]=r.a.useState(1===e.row.enabled),[l,d]=(e.row.cameraCode,r.a.useState({id:e.row.id,cameraId:e.row.cameraId,name:e.row.name,authCode:e.row.authCode,startTime:e.row.startTime?e.row.startTime:ge()(),deadline:e.row.deadline?e.row.deadline:ge()().add(7,"day"),enabled:e.row.enabled})),[s,j]=r.a.useState(!1),[b,h]=r.a.useState("");Object(n.useImperativeHandle)(e.onRef,(()=>({handleClickOpen:m})));const m=()=>{l.id=e.row.id,l.cameraId=e.row.cameraId,l.name=e.row.name,l.authCode=e.row.authCode,l.startTime=e.row.startTime?e.row.startTime:ge()(),l.deadline=e.row.deadline?e.row.deadline:ge()().add(7,"day"),l.enabled=e.row.enabled,d(l),o(!0)},u=()=>{o(!1)},p=a=>{ee(l).then((a=>{if(1===a.code)return o(!1),void(e.callBack&&e.callBack());h(a.msg),j(!0),window.setTimeout((function(){j(!1)}),5e3)}))},x=e=>{l[e.target.id]=ge()(e.target.value)};return Object(ne.jsx)("div",{children:Object(ne.jsxs)(S.a,{fullScreen:!0,open:t,onClose:u,TransitionComponent:Re,children:[Object(ne.jsx)(I.a,{className:a.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:p,children:"\u4fdd\u5b58"}),Object(ne.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(ne.jsx)(y.a,{variant:"contained",onClick:a=>{ae(l).then((a=>{if(1===a.code)return o(!1),void(e.callBack&&e.callBack());h(a.msg),j(!0),window.setTimeout((function(){j(!1)}),5e3)}))},children:"\u5220\u9664"}):"",Object(ne.jsx)(T.a,{variant:"h6",className:a.title,children:Object(ne.jsxs)("div",{children:[l.name?l.name+" \u5206\u4eab\u7f16\u8f91":"\u521b\u5efa\u5206\u4eab"," "]})}),Object(ne.jsx)(y.a,{autoFocus:!0,color:"inherit",onClick:u,children:Object(ne.jsx)(R.a,{})})]})}),s?Object(ne.jsxs)(le.a,{severity:"error",children:[Object(ne.jsx)(de.a,{children:"Error"}),b," ",Object(ne.jsx)("strong",{children:"check it out!"})]}):"",Object(ne.jsx)("div",{className:a.formDiv,children:Object(ne.jsxs)("form",{className:a.formClass,noValidate:!0,autoComplete:"off",onSubmit:p,children:["edit"===e.type?Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:l.id})}):"",Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"name",label:"\u5206\u4eab\u540d\u79f0",defaultValue:l.name,onChange:e=>{l[e.target.id]=e.target.value}})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"startTime",label:"\u5f00\u59cb\u65f6\u95f4",type:"datetime-local",defaultValue:l.startTime?ge()(l.startTime).format("YYYY-MM-DDTHH:mm"):ge()().format("YYYY-MM-DDTHH:mm"),InputLabelProps:{shrink:!0},onChange:x})}),Object(ne.jsx)("div",{children:Object(ne.jsx)(ie.a,{id:"deadline",label:"\u622a\u6b62\u65e5\u671f",type:"datetime-local",defaultValue:l.deadline?ge()(l.deadline).format("YYYY-MM-DDTHH:mm"):ge()().add(7,"day").format("YYYY-MM-DDTHH:mm"),InputLabelProps:{shrink:!0},onChange:x})}),"edit"===e.type?"":Object(ne.jsx)("div",{children:Object(ne.jsx)(B.a,{checked:c,id:"enabled",onChange:e=>{console.log(e.target.checked),l[e.target.id]=e.target.checked?1:0,"enabled"===e.target.id&&i(e.target.checked)},color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})})]})})]})})}const Me=Object(d.a)((()=>({root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}})));function De(e){const a=Me(),[t,n]=r.a.useState(!1),[o,c]=r.a.useState({title:"Success",content:"copy success !"}),[i,l]=r.a.useState(e.row);let d=r.a.createRef();let s=r.a.createRef();let j=r.a.createRef();return Object(ne.jsx)(w.a,{onClickAway:()=>{n(!1)},children:Object(ne.jsxs)("div",{className:a.root,children:[Object(ne.jsx)("button",{type:"button",onClick:()=>{n((e=>!e))},children:Object(ne.jsx)(C.a,{})}),t?Object(ne.jsx)("div",{className:a.dropdown,children:Object(ne.jsxs)(fe.a,{component:"nav","aria-label":"secondary mailbox folders",children:[Object(ne.jsx)(ve.a,{button:!0,children:Object(ne.jsx)(we.a,{primary:"\u7f16\u8f91",onClick:function(){n(!1),s.current.handleClickOpen()}})}),Object(ne.jsx)(ve.a,{button:!0,onClick:()=>{i.enabled=1===i.enabled?0:1,te(i).then((a=>{if(1===a.code)return n(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.enabled?Object(ne.jsx)(we.a,{primary:"\u7981\u7528"}):Object(ne.jsx)(we.a,{primary:"\u542f\u7528"})}),Object(ne.jsx)(ve.a,{button:!0,onClick:function(){n(!1),l(e.row),d.current.handleClickOpen()},children:Object(ne.jsx)(we.a,{primary:"\u64ad\u653e"})}),Object(ne.jsx)(ve.a,{button:!0,onClick:function(){n(!1);let a=window.location.origin+window.location.pathname+"#/live?method=temp&code="+e.row.cameraCode+"&authCode="+e.row.authCode;Ce()(a),j.current.handleClickOpen()},children:Object(ne.jsx)(we.a,{primary:"\u5206\u4eab"})})]})}):null,Object(ne.jsx)(ce,{playParam:{playMethod:"temp",cameraCode:i.cameraCode,authCode:i.authCode},onRef:d}),Object(ne.jsx)(Ee,{row:e.row,type:"edit",callBack:e.callBack,onRef:s}),Object(ne.jsx)(Be,{dialog:o,onRef:j})]})})}const Ye=[{id:"id",label:"id",minWidth:170},{id:"name",label:"\u5206\u4eab\u540d\u79f0"},{id:"authCode",label:"\u6743\u9650\u7801"},{id:"startTime",label:"\u5f00\u59cb\u65f6\u95f4",format:e=>{(new Date).getTimezoneOffset();return e?ge()(e).format("YYYY-MM-DD HH:mm"):"---"}},{id:"deadline",label:"\u622a\u6b62\u65f6\u95f4",format:e=>{(new Date).getTimezoneOffset();return e?ge()(e).format("YYYY-MM-DD HH:mm"):"---"}},{id:"enabled",label:"\u542f\u7528\u72b6\u6001",format:e=>Object(ne.jsx)(B.a,{checked:1===e,id:"enabled",color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})},{id:"action",label:"\u64cd\u4f5c",format:(e,a,t,n)=>(a.cameraId=t.id,a.cameraCode=t.code,Object(ne.jsx)(De,{row:a,callBack:n}))}],Ve=Object(d.a)((e=>({root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}})));function Ae(e){const a=Ve(),[t,n]=r.a.useState(0),[o,c]=r.a.useState(10),[l,d]=r.a.useState([]),[O,g]=r.a.useState({id:"",cameraId:"",cameraCode:"",name:"",authCode:"",enabled:1,startTime:"",deadline:""}),[f,v]=r.a.useState({}),w=()=>{let e=(e=>{let a=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),t=window.location.hash.substr(1).match(a);return null!=t?decodeURIComponent(t[2]):null})("cameraId");q({id:e}).then((e=>{if(1===e.code){let a=e.data;if(!a)return;v(a);let t=O;t.cameraId=a.id,t.cameraCode=a.code,g(t),Z({cameraId:a.id}).then((e=>{1===e.code&&(l.splice(0),l.push(...e.data.page),d([]),d(l))}))}}))};let k=r.a.createRef();return r.a.useEffect(w,[]),Object(ne.jsxs)(s.a,{className:a.root,children:[Object(ne.jsx)(I.a,{className:a.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:function(){g({}),g(O),k.current.handleClickOpen()},children:"\u521b\u5efa"}),Object(ne.jsxs)(T.a,{variant:"h6",className:a.title,children:["\u6444\u50cf\u5934: ",f.code?f.code:"--"," \u5206\u4eab\u5217\u8868"]}),Object(ne.jsx)(y.a,{variant:"contained",children:Object(ne.jsx)(i.b,{exact:!0,to:{pathname:"/",state:{}},children:"\u8fd4\u56de"})})]})}),Object(ne.jsx)(Ee,{row:O,type:"add",callBack:w,onRef:k}),Object(ne.jsx)(m.a,{className:a.container,children:Object(ne.jsxs)(j.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(ne.jsx)(u.a,{children:Object(ne.jsx)(x.a,{children:Ye.map((e=>Object(ne.jsx)(h.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)))})}),Object(ne.jsx)(b.a,{children:l.slice(t*o,t*o+o).map((e=>Object(ne.jsx)(x.a,{hover:!0,role:"checkbox",tabIndex:-1,children:Ye.map((a=>{const t=e[a.id];return Object(ne.jsx)(h.a,{align:a.align,children:a.format?a.format(t,e,f,w):t},a.id)}))},e.id)))})]})}),Object(ne.jsx)(p.a,{rowsPerPageOptions:[10,25,100],component:"div",count:l.length,rowsPerPage:o,page:t,onChangePage:(e,a)=>{n(a)},onChangeRowsPerPage:e=>{c(+e.target.value),n(0)}})]})}var He=t(240),Fe=t(230),Le=t(231),We=t(238),ze=t(228),$e=t(232),Ue=t(229),qe=t(112),Je=t.n(qe);function _e(){return Object(ne.jsxs)(T.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(ne.jsx)(ze.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}const Ke=Object(d.a)((e=>({root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}})));function Ge(){const e=Ke(),[a,t]=r.a.useState({userName:"",password:""}),[n,o]=r.a.useState(!1),[c,i]=r.a.useState(""),l=e=>{a[e.target.id]=e.target.value};return r.a.useEffect((()=>{"true"===window.localStorage.getItem("tokenExpired")&&localStorage.setItem("tokenExpired","false")}),[]),Object(ne.jsxs)(Ue.a,{container:!0,component:"main",className:e.root,children:[Object(ne.jsx)(Fe.a,{}),Object(ne.jsx)(Ue.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(ne.jsx)(Ue.a,{item:!0,xs:12,sm:8,md:5,component:s.a,elevation:6,square:!0,children:Object(ne.jsxs)("div",{className:e.paper,children:[Object(ne.jsx)(He.a,{className:e.avatar,children:Object(ne.jsx)(Je.a,{})}),Object(ne.jsx)(T.a,{component:"h1",variant:"h5",children:"Sign in"}),n?Object(ne.jsxs)(le.a,{severity:"error",children:[Object(ne.jsx)(de.a,{children:"Error"}),c," ",Object(ne.jsx)("strong",{children:"check it out!"})]}):"",Object(ne.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(ne.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userName",label:"UserName",name:"userName",autoComplete:"userName",autoFocus:!0,onChange:l}),Object(ne.jsx)(ie.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:l}),Object(ne.jsx)(Le.a,{control:Object(ne.jsx)(We.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(ne.jsx)(y.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:e=>{$(a).then((e=>{if(1===e.code){let a=window.localStorage;return a.setItem("token",e.data.token),a.setItem("tokenExpired","false"),void(window.location.hash="#/")}i(e.msg),o(!0)}))},children:"Sign In"}),Object(ne.jsxs)(Ue.a,{container:!0,children:[Object(ne.jsx)(Ue.a,{item:!0,xs:!0,children:Object(ne.jsx)(ze.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(ne.jsx)(Ue.a,{item:!0,children:Object(ne.jsx)(ze.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(ne.jsx)($e.a,{mt:5,children:Object(ne.jsx)(_e,{})})]})]})})]})}class Qe extends r.a.Component{render(){return Object(ne.jsx)("h2",{children:"404"})}}const Xe=Object(d.a)((e=>({appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}})));function Ze(e){const a=Xe(),[t,n]=r.a.useState(!0);var o=null,c=0;const i=e=>{let a=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),t=window.location.hash.substr(1).match(a);return null!=t?decodeURIComponent(t[2]):null},l=e=>{let a=i("method"),n=i("code"),r=i("authCode");if(!a||!n||!r)return;var o={type:"flv"};let c=z+"/live/"+a+"/"+n+"/"+r+".flv";o.url=c,o.hasAudio=t,o.isLive=!0,console.log("MediaDataSource",o),d(o)},d=e=>{var a=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof o&&null!=o&&(o.pause(),o.unload(),o.detachMediaElement(),o.destroy(),o=null),(o=D.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).on(D.a.Events.ERROR,((e,a,t)=>{console.log("errorType:",e),console.log("errorDetail:",a),console.log("errorInfo:",t),o&&(o.pause(),o.unload(),o.detachMediaElement(),o.destroy(),o=null,window.setTimeout(l,500))})),o.on(D.a.Events.STATISTICS_INFO,(function(e){0!=c?c!=e.decodedFrames?c=e.decodedFrames:(console.log("decodedFrames:",e.decodedFrames),c=0,o&&(o.pause(),o.unload(),o.detachMediaElement(),o.destroy(),o=null,window.setTimeout(l,500))):c=e.decodedFrames})),o.attachMediaElement(a),o.load(),o.play()};return Object(ne.jsx)("div",{children:Object(ne.jsxs)("div",{children:[Object(ne.jsx)(I.a,{className:a.appBar,children:Object(ne.jsxs)(N.a,{children:[Object(ne.jsx)(y.a,{variant:"contained",onClick:l,children:"play"}),Object(ne.jsxs)(T.a,{variant:"h6",className:a.title,children:["hasAudio",Object(ne.jsx)(B.a,{checked:t,id:"Audio",color:"primary",name:"hasAudio",onChange:e=>{n(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]})]})}),Object(ne.jsx)("div",{className:a.videoContainer,children:Object(ne.jsx)("div",{children:Object(ne.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}function ea(e){return Object(ne.jsxs)(l.c,{children:[Object(ne.jsx)(l.a,{exact:!0,path:"/",component:xe}),Object(ne.jsx)(l.a,{exact:!0,path:"/camerashare",component:Ae}),Object(ne.jsx)(l.a,{exact:!0,path:"/live",component:Ze}),Object(ne.jsx)(l.a,{path:"/login",component:Ge}),Object(ne.jsx)(l.a,{component:Qe})]})}var aa=Object(n.memo)(ea);var ta=function(){return Object(ne.jsx)("div",{children:Object(ne.jsx)(i.a,{children:Object(ne.jsx)(aa,{})})})};function na(){return Object(ne.jsx)(ta,{})}c.a.render(Object(ne.jsx)(na,{}),document.querySelector("#app"))}},[[165,1,2]]]);
//# sourceMappingURL=main.672abc9b.chunk.js.map