(this.webpackJsonprtsp2flvweb=this.webpackJsonprtsp2flvweb||[]).push([[0],{163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),o=a.n(c),i=a(87),l=a(16),s=a(114),d=a(14),u=a(209),j=a(165),b=a(229),h=a(233),p=a(232),m=a(228),O=a(230),f=a(243),x=a(231),v=a(112),g=a.n(v),w=a(111),k=a.n(w),C=a(225),y=a(224),S=a(226),N=a(227),A=a(110),I=a.n(A),R=a(105),B=a.n(R),P=a(216),E=a(245),L=a(215),D=a(213),M=a(212),W=a(214),T=a(2),V=Object(u.a)((function(e){return{root:{width:"100%"}}}));function H(e){var t=V(),a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1],l=r.a.useState(e.dialog.title),s=Object(d.a)(l,2),u=s[0],j=(s[1],r.a.useState(e.dialog.content)),b=Object(d.a)(j,2),h=b[0];b[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:p}}));var p=function(){i(!0)},m=function(){i(!1)};return Object(T.jsx)("div",{className:t.root,children:Object(T.jsxs)(E.a,{open:o,onClose:m,"aria-labelledby":"form-dialog-title",children:[Object(T.jsx)(M.a,{id:"form-dialog-title",children:u}),Object(T.jsx)(D.a,{children:Object(T.jsx)(W.a,{children:h})}),Object(T.jsx)(L.a,{children:Object(T.jsx)(P.a,{onClick:m,color:"primary",children:"OK"})})]})})}var U=a(80),q=a(218),z=a(219),F=a(40),Y=a(220),J=a(66),K=a.n(J),$=a(217),G=a(79),Q={serverURL:window.location.origin},X=a(34),Z=a.n(X);Z.a.defaults.withCredentials=!1,Z.a.defaults.timeout=1e4,Z.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("token");return e.headers.token=t,e}),(function(e){return console.error(e),Promise.reject(e)})),Z.a.interceptors.response.use((function(e){return e.data&&e.data.errcode&&401===parseInt(e.data.errcode)&&(window.location.hash="#/login"),e}),(function(e){return Z.a.isCancel()||(e.response?(console.log(401===e.response.status),401===e.response.status?window.localStorage.getItem("token")&&window.localStorage.getItem("tokenExpired")&&"false"!==window.localStorage.getItem("tokenExpired")||(window.localStorage.setItem("tokenExpired","true"),window.location.hash="#/login"):500===e.response.status&&alert("server exception !")):e&&"error: timeout"===String(e).toLowerCase().substring(0,14)?alert("server timeout !"):alert("server error !")),Promise.reject(e)}));var _=Q.serverURL,ee=function(e,t){return Z.a.post("".concat(_).concat(e),t).then((function(e){return e.data}))},te="".concat(Q.serverURL),ae=function(e){return ee("/system/login",e)},ne=function(e){return function(e,t){return Z.a.get("".concat(_).concat(e),{params:t}).then((function(e){return e.data}))}("/camera/list",e)},re=function(e){return ee("/camera/edit",e)},ce=function(e){return ee("/camera/delete/".concat(e.id),e)},oe=function(e){return ee("/camera/enabled",e)},ie=Object(u.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}})),le=r.a.forwardRef((function(e,t){return Object(T.jsx)($.a,Object(U.a)({direction:"up",ref:t},e))}));function se(e){var t=ie(),a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1],l=r.a.useState(!0),s=Object(d.a)(l,2),u=s[0],j=s[1],b=null;Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:h}}));var h=function(){i(!0)},p=function(){i(!1)},m=function(e){var t=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof b&&null!=b&&(b.unload(),b.detachMediaElement(),b.destroy(),b=null),(b=G.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).attachMediaElement(t),b.load(),b.play()};return Object(T.jsx)("div",{children:Object(T.jsxs)(E.a,{fullScreen:!0,open:o,onClose:p,TransitionComponent:le,children:[Object(T.jsx)(q.a,{className:t.appBar,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(P.a,{variant:"contained",onClick:function(t){var a={type:"flv"},n=te+"/live/permanent/"+e.row.code+"/"+e.row.playAuthCode+".flv";a.url=n,a.hasAudio=u,a.isLive=!0,console.log("MediaDataSource",a),m(a)},children:"play"}),Object(T.jsxs)(F.a,{variant:"h6",className:t.title,children:["hasAudio",Object(T.jsx)(Y.a,{checked:u,id:"Audio",color:"primary",name:"hasAudio",onChange:function(e){j(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]}),Object(T.jsx)(P.a,{autoFocus:!0,color:"inherit",onClick:p,children:Object(T.jsx)(K.a,{})})]})}),Object(T.jsx)("div",{className:t.videoContainer,children:Object(T.jsx)("div",{children:Object(T.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}var de=a(242),ue=a(240),je=a(221),be=Object(u.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1},formClass:{"& > *":{margin:e.spacing(1),width:"25ch"}},formDiv:{margin:"0 auto"}}})),he=r.a.forwardRef((function(e,t){return Object(T.jsx)($.a,Object(U.a)({direction:"up",ref:t},e))}));function pe(e){var t=be(),a=r.a.useState(!1),c=Object(d.a)(a,2),o=c[0],i=c[1],l=r.a.useState(1===e.row.enabled),s=Object(d.a)(l,2),u=s[0],j=s[1],b=r.a.useState({id:e.row.id,code:e.row.code,rtmpAuthCode:e.row.rtmpAuthCode,playAuthCode:e.row.playAuthCode,onlineStatus:e.row.onlineStatus,enabled:e.row.enabled}),h=Object(d.a)(b,2),p=h[0],m=(h[1],r.a.useState(!1)),O=Object(d.a)(m,2),f=O[0],x=O[1],v=r.a.useState(""),g=Object(d.a)(v,2),w=g[0],k=g[1];Object(n.useImperativeHandle)(e.onRef,(function(){return{handleClickOpen:C}}));var C=function(){i(!0)},y=function(){i(!1)},S=function(t){re(p).then((function(t){if(1===t.code)return i(!1),void(e.callBack&&e.callBack());k(t.msg),x(!0),window.setTimeout((function(){x(!1)}),5e3)}))},N=function(e){p[e.target.id]=e.target.value};return Object(T.jsx)("div",{children:Object(T.jsxs)(E.a,{fullScreen:!0,open:o,onClose:y,TransitionComponent:he,children:[Object(T.jsx)(q.a,{className:t.appBar,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(P.a,{variant:"contained",onClick:S,children:"save"}),Object(T.jsx)("span",{children:"\xa0\xa0"}),"edit"===e.type?Object(T.jsx)(P.a,{variant:"contained",onClick:function(t){ce(p).then((function(t){if(1===t.code)return i(!1),void(e.callBack&&e.callBack());k(t.msg),x(!0),window.setTimeout((function(){x(!1)}),5e3)}))},children:"delete"}):"",Object(T.jsx)(F.a,{variant:"h6",className:t.title}),Object(T.jsx)(P.a,{autoFocus:!0,color:"inherit",onClick:y,children:Object(T.jsx)(K.a,{})})]})}),f?Object(T.jsxs)(ue.a,{severity:"error",children:[Object(T.jsx)(je.a,{children:"Error"}),w," ",Object(T.jsx)("strong",{children:"check it out!"})]}):"",Object(T.jsx)("div",{className:t.formDiv,children:Object(T.jsxs)("form",{className:t.formClass,noValidate:!0,autoComplete:"off",onSubmit:S,children:["edit"===e.type?Object(T.jsx)("div",{children:Object(T.jsx)(de.a,{id:"id",label:"id",InputProps:{readOnly:!0},defaultValue:p.id})}):"",Object(T.jsx)("div",{children:Object(T.jsx)(de.a,{id:"code",label:"code",defaultValue:p.code,onChange:N})}),Object(T.jsx)("div",{children:Object(T.jsx)(de.a,{id:"rtmpAuthCode",label:"rtmpAuthCode",defaultValue:p.rtmpAuthCode,onChange:N})}),Object(T.jsx)("div",{children:Object(T.jsx)(Y.a,{checked:u,id:"enabled",onChange:function(e){console.log(e.target.checked),p[e.target.id]=e.target.checked?1:0,"enabled"===e.target.id&&j(e.target.checked)},color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})})]})})]})})}var me=Object(u.a)((function(){return{root:{position:"relative"},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:999,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"}}}));function Oe(e){var t=me(),a=r.a.useState(!1),n=Object(d.a)(a,2),c=n[0],o=n[1],i=r.a.useState({title:"Success",content:"copy success !"}),l=Object(d.a)(i,2),s=l[0],u=(l[1],r.a.useState(e.row)),j=Object(d.a)(u,2),b=j[0],h=(j[1],r.a.createRef());var p=r.a.createRef();var m=r.a.createRef();return Object(T.jsx)(C.a,{onClickAway:function(){o(!1)},children:Object(T.jsxs)("div",{className:t.root,children:[Object(T.jsx)("button",{type:"button",onClick:function(){o((function(e){return!e}))},children:Object(T.jsx)(I.a,{})}),c?Object(T.jsx)("div",{className:t.dropdown,children:Object(T.jsxs)(y.a,{component:"nav","aria-label":"secondary mailbox folders",children:[Object(T.jsx)(S.a,{button:!0,children:Object(T.jsx)(N.a,{primary:"edit",onClick:function(){o(!1),p.current.handleClickOpen()}})}),Object(T.jsx)(S.a,{button:!0,onClick:function(){b.enabled=1===b.enabled?0:1,oe(b).then((function(t){if(1===t.code)return o(!1),void(e.callBack&&e.callBack())}))},children:1===e.row.enabled?Object(T.jsx)(N.a,{primary:"turn-off"}):Object(T.jsx)(N.a,{primary:"turn-on"})}),Object(T.jsx)(S.a,{button:!0,onClick:function(){o(!1),h.current.handleClickOpen()},children:Object(T.jsx)(N.a,{primary:"play"})}),Object(T.jsx)(S.a,{button:!0,onClick:function(){o(!1);var t=window.location.origin+window.location.pathname+"#/live?method=permanent&code="+e.row.code+"&authCode="+e.row.playAuthCode;B()(t),m.current.handleClickOpen()},children:Object(T.jsx)(N.a,{primary:"share"})})]})}):null,Object(T.jsx)(se,{row:e.row,onRef:h}),Object(T.jsx)(pe,{row:e.row,type:"edit",callBack:e.callBack,onRef:p}),Object(T.jsx)(H,{dialog:s,onRef:m})]})})}var fe=[{id:"id",label:"id",minWidth:170},{id:"code",label:"code",minWidth:100},{id:"rtmpAuthCode",label:"rtmpAuthCode"},{id:"playAuthCode",label:"playAuthCode"},{id:"onlineStatus",label:"onlineStatus",format:function(e){return e&&1===e?Object(T.jsx)(k.a,{}):Object(T.jsx)(g.a,{})}},{id:"enabled",label:"enabled",format:function(e){return Object(T.jsx)(Y.a,{checked:1===e,id:"enabled",color:"primary",name:"enabled",inputProps:{"aria-label":"primary checkbox"}})}},{id:"action",label:"action",format:function(e,t,a){return Object(T.jsx)(Oe,{row:t,callBack:a})}}],xe=Object(u.a)((function(e){return{root:{width:"100%",position:"relative"},container:{minHeight:400},dropdown:{position:"absolute",top:28,right:0,left:0,zIndex:0,border:"0px solid",padding:1,backgroundColor:"#f8f8f8"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}}));function ve(){var e,t,a=xe(),n=r.a.useState(0),c=Object(d.a)(n,2),o=c[0],i=c[1],l=r.a.useState(10),u=Object(d.a)(l,2),v=u[0],g=u[1],w=r.a.useState([]),k=Object(d.a)(w,2);e=k[0],t=k[1];var C=function(){ne().then((function(a){var n;1===a.code&&(e.splice(0),(n=e).push.apply(n,Object(s.a)(a.data.page)),t([]),t(e))}))},y=r.a.createRef();return r.a.useEffect(C,[]),Object(T.jsxs)(j.a,{className:a.root,children:[Object(T.jsx)(q.a,{className:a.appBar,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(P.a,{variant:"contained",onClick:function(){y.current.handleClickOpen()},children:"ADD"}),Object(T.jsx)(F.a,{variant:"h6",className:a.title})]})}),Object(T.jsx)(pe,{row:{id:"",code:"",rtmpAuthCode:"",playAuthCode:"",onlineStatus:0,enabled:1},type:"add",callBack:C,onRef:y}),Object(T.jsx)(m.a,{className:a.container,children:Object(T.jsxs)(b.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(T.jsx)(O.a,{children:Object(T.jsx)(x.a,{children:fe.map((function(e){return Object(T.jsx)(p.a,{align:e.align,style:{minWidth:e.minWidth},children:e.label},e.id)}))})}),Object(T.jsx)(h.a,{children:e.slice(o*v,o*v+v).map((function(e){return Object(T.jsx)(x.a,{hover:!0,role:"checkbox",tabIndex:-1,children:fe.map((function(t){var a=e[t.id];return Object(T.jsx)(p.a,{align:t.align,children:t.format?t.format(a,e,C):a},t.id)}))},e.code)}))})]})}),Object(T.jsx)(f.a,{rowsPerPageOptions:[10,25,100],component:"div",count:e.length,rowsPerPage:v,page:o,onChangePage:function(e,t){i(t)},onChangeRowsPerPage:function(e){g(+e.target.value),i(0)}})]})}var ge=a(246),we=a(236),ke=a(237),Ce=a(244),ye=a(234),Se=a(238),Ne=a(235),Ae=a(113),Ie=a.n(Ae);function Re(){return Object(T.jsxs)(F.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(T.jsx)(ye.a,{color:"inherit",href:"https://material-ui.com/",children:"Your Website"})," ",(new Date).getFullYear(),"."]})}var Be=Object(u.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Pe(){var e=Be(),t=r.a.useState({userName:"",password:""}),a=Object(d.a)(t,2),n=a[0],c=(a[1],r.a.useState(!1)),o=Object(d.a)(c,2),i=o[0],l=o[1],s=r.a.useState(""),u=Object(d.a)(s,2),b=u[0],h=u[1],p=function(e){n[e.target.id]=e.target.value};return r.a.useEffect((function(){"true"===window.localStorage.getItem("tokenExpired")&&localStorage.setItem("tokenExpired","false")}),[]),Object(T.jsxs)(Ne.a,{container:!0,component:"main",className:e.root,children:[Object(T.jsx)(we.a,{}),Object(T.jsx)(Ne.a,{item:!0,xs:!1,sm:4,md:7,className:e.image}),Object(T.jsx)(Ne.a,{item:!0,xs:12,sm:8,md:5,component:j.a,elevation:6,square:!0,children:Object(T.jsxs)("div",{className:e.paper,children:[Object(T.jsx)(ge.a,{className:e.avatar,children:Object(T.jsx)(Ie.a,{})}),Object(T.jsx)(F.a,{component:"h1",variant:"h5",children:"Sign in"}),i?Object(T.jsxs)(ue.a,{severity:"error",children:[Object(T.jsx)(je.a,{children:"Error"}),b," ",Object(T.jsx)("strong",{children:"check it out!"})]}):"",Object(T.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(T.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"userName",label:"UserName",name:"userName",autoComplete:"userName",autoFocus:!0,onChange:p}),Object(T.jsx)(de.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:p}),Object(T.jsx)(ke.a,{control:Object(T.jsx)(Ce.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(T.jsx)(P.a,{fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){ae(n).then((function(e){if(1===e.code){var t=window.localStorage;return t.setItem("token",e.data.token),t.setItem("tokenExpired","false"),void(window.location.hash="#/")}h(e.msg),l(!0)}))},children:"Sign In"}),Object(T.jsxs)(Ne.a,{container:!0,children:[Object(T.jsx)(Ne.a,{item:!0,xs:!0,children:Object(T.jsx)(ye.a,{href:"#",variant:"body2",children:"Forgot password?"})}),Object(T.jsx)(Ne.a,{item:!0,children:Object(T.jsx)(ye.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]}),Object(T.jsx)(Se.a,{mt:5,children:Object(T.jsx)(Re,{})})]})]})})]})}var Ee=a(7),Le=a(8),De=a(21),Me=a(20),We=function(e){Object(De.a)(a,e);var t=Object(Me.a)(a);function a(){return Object(Ee.a)(this,a),t.apply(this,arguments)}return Object(Le.a)(a,[{key:"render",value:function(){return Object(T.jsx)("h2",{children:"404"})}}]),a}(r.a.Component),Te=Object(u.a)((function(e){return{appBar:{position:"relative",backgroundColor:"#eebbaa"},title:{marginLeft:e.spacing(2),flex:1},videoContainer:{width:"90%",margin:"0 auto"}}}));function Ve(e){var t=Te(),a=r.a.useState(!0),n=Object(d.a)(a,2),c=n[0],o=n[1],i=null,l=function(e){var t=new RegExp("(^|&|\\?)"+e+"=([^&]*)(&|$)","i"),a=window.location.hash.substr(1).match(t);return null!=a?decodeURIComponent(a[2]):null},s=function(e){var t=document.getElementsByClassName("centeredVideo")[0];"undefined"!==typeof i&&null!=i&&(i.unload(),i.detachMediaElement(),i.destroy(),i=null),(i=G.a.createPlayer(e,{enableWorker:!1,lazyLoadMaxDuration:180,seekType:"range"})).attachMediaElement(t),i.load(),i.play()};return Object(T.jsx)("div",{children:Object(T.jsxs)("div",{children:[Object(T.jsx)(q.a,{className:t.appBar,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(P.a,{variant:"contained",onClick:function(e){var t=l("method"),a=l("code"),n=l("authCode");if(t&&a&&n){var r={type:"flv"},o=te+"/live/"+t+"/"+a+"/"+n+".flv";r.url=o,r.hasAudio=c,r.isLive=!0,console.log("MediaDataSource",r),s(r)}},children:"play"}),Object(T.jsxs)(F.a,{variant:"h6",className:t.title,children:["hasAudio",Object(T.jsx)(Y.a,{checked:c,id:"Audio",color:"primary",name:"hasAudio",onChange:function(e){o(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}})]})]})}),Object(T.jsx)("div",{className:t.videoContainer,children:Object(T.jsx)("div",{children:Object(T.jsx)("video",{name:"videoElement",className:"centeredVideo",controls:!0,allow:"autoPlay",width:"100%",children:"Your browser is too old which doesn't support HTML5 video."})})})]})})}function He(e){return Object(T.jsxs)(l.c,{children:[Object(T.jsx)(l.a,{exact:!0,path:"/",component:ve}),Object(T.jsx)(l.a,{exact:!0,path:"/live",component:Ve}),Object(T.jsx)(l.a,{path:"/login",component:Pe}),Object(T.jsx)(l.a,{component:We})]})}var Ue=Object(n.memo)(He);var qe=function(){return Object(T.jsx)("div",{children:Object(T.jsx)(i.a,{children:Object(T.jsx)(Ue,{})})})};function ze(){return Object(T.jsx)(qe,{})}o.a.render(Object(T.jsx)(ze,{}),document.querySelector("#app"))}},[[163,1,2]]]);
//# sourceMappingURL=main.f611e3ba.chunk.js.map